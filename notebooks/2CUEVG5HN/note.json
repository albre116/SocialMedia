{
  "paragraphs": [
    {
      "text": "%dep\nz.reset()\n//z.load(\"org.apache.spark:spark-streaming-twitter_2.11:1.5.2\")\nz.load(\"org.apache.bahir:spark-streaming-twitter_2.11:2.0.1\")\nz.load(\"org.twitter4j:twitter4j-core:3.0.3\")\nz.load(\"org.twitter4j:twitter4j-media-support:3.0.3\")\nz.load(\"org.twitter4j:twitter4j-async:3.0.3\")\nz.load(\"org.twitter4j:twitter4j-examples:3.0.3\")\nz.load(\"org.twitter4j:twitter4j-stream:3.0.3\")\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:24:11 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "editorMode": "ace/mode/text"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "res0: org.apache.zeppelin.dep.Dependency \u003d org.apache.zeppelin.dep.Dependency@5858ccf5\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1505396413619_-1309561807",
      "id": "20170914-134013_1388942810",
      "dateCreated": "Sep 14, 2017 1:40:13 PM",
      "dateStarted": "Sep 14, 2017 3:24:11 PM",
      "dateFinished": "Sep 14, 2017 3:24:15 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%spark\nimport org.apache.spark.streaming._\nimport org.apache.spark.streaming.twitter._\n//import org.apache.bahir.spark.streaming.twitter._\nimport org.apache.spark.storage.StorageLevel\nimport scala.io.Source\nimport scala.collection.mutable.HashMap\nimport java.io.File\nimport org.apache.log4j.Logger\nimport org.apache.log4j.Level\nimport sys.process.stringSeqToProcess\nimport twitter4j.HashtagEntity\n\nval consumerKey \u003d System.getenv(\"TWITTER_CONSUMER_KEY\")\nval consumerSecret \u003d System.getenv(\"TWITTER_CONSUMER_SECRET\")\nval accessToken \u003d System.getenv(\"TWITTER_ACCESS_TOKEN\")\nval accessTokenSecret \u003d System.getenv(\"TWITTER_ACCESS_SECRET\")\n\nSystem.setProperty(\"twitter4j.oauth.consumerKey\", consumerKey)\nSystem.setProperty(\"twitter4j.oauth.consumerSecret\", consumerSecret)\nSystem.setProperty(\"twitter4j.oauth.accessToken\", accessToken)\nSystem.setProperty(\"twitter4j.oauth.accessTokenSecret\", accessTokenSecret)\n\n\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:24:15 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "editorMode": "ace/mode/text"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nimport org.apache.spark.streaming._\n\nimport org.apache.spark.streaming.twitter._\n\nimport org.apache.spark.storage.StorageLevel\n\nimport scala.io.Source\n\nimport scala.collection.mutable.HashMap\n\nimport java.io.File\n\nimport org.apache.log4j.Logger\n\nimport org.apache.log4j.Level\n\nimport sys.process.stringSeqToProcess\n\nimport twitter4j.HashtagEntity\n\nconsumerKey: String \u003d bcfMz9WsSeJLAFKs8DcSCq5qS\n\nconsumerSecret: String \u003d Cy33bYqk9JWUr3kvGqzaLnwbBfv3BLZ4M6nysxPpBMUUAu1JJE\n\naccessToken: String \u003d 4332384689-zNH8ikndg5Mq8icy07Kvni6TmP2zEg43L21Ftca\n\naccessTokenSecret: String \u003d Rz7ZvL05ywhxMvKyRaxhxAVUkjGrwHlug2fTvxRzhN3YW\n\nres3: String \u003d null\n\nres4: String \u003d null\n\nres5: String \u003d null\n\nres6: String \u003d null\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1505396456121_1092102124",
      "id": "20170914-134056_1684202951",
      "dateCreated": "Sep 14, 2017 1:40:56 PM",
      "dateStarted": "Sep 14, 2017 3:24:15 PM",
      "dateFinished": "Sep 14, 2017 3:24:23 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%angular\n\u003clink rel\u003d\"stylesheet\" href\u003d\"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css\" /\u003e\n\u003cdiv id\u003d\"map\" style\u003d\"height: 800px; width: 100%\"\u003e\u003c/div\u003e\n\n\u003cscript type\u003d\"text/javascript\"\u003e\nfunction initMap() {\n    var map \u003d L.map(\u0027map\u0027).setView([30.00, -30.00], 3);\n\n    L.tileLayer(\u0027http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\u0027, {\n        attribution: \u0027Map data \u0026copy; \u003ca href\u003d\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e contributors\u0027,\n        maxZoom: 12,\n        minZoom: 3\n    }).addTo(map);\n\n    var el \u003d angular.element($(\u0027#map\u0027).parent(\u0027.ng-scope\u0027));\n    angular.element(el).ready(function() {\n        window.locationWatcher \u003d el.scope().compiledScope.$watch(\u0027data\u0027, function(newValue, oldValue) {\n            angular.forEach(newValue, function(tweet) {\n                L.marker([tweet.lat, tweet.lon]).bindPopup(\"\u003cb\u003e\" + tweet.user + \"\u003c/b\u003e\u003cbr\u003e\" + tweet.tweet).addTo(map);             \n            });\n        })\n    });\n}\n\nif (window.locationWatcher) { window.locationWatcher(); }\n\nif (window.L) { initMap(); }\nelse {\n    var sc \u003d document.createElement(\u0027script\u0027);\n    sc.type \u003d \u0027text/javascript\u0027;\n    sc.src \u003d \u0027https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js\u0027;\n    sc.onload \u003d initMap;\n    sc.onerror \u003d function(err) { alert(err); }\n    document.getElementsByTagName(\u0027head\u0027)[0].appendChild(sc);\n}\n\u003c/script\u003e\n\n\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:24:25 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "scala",
          "editOnDblClick": true
        },
        "editorMode": "ace/mode/undefined",
        "editorHide": true,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "ANGULAR",
            "data": "\u003clink rel\u003d\"stylesheet\" href\u003d\"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css\" /\u003e\n\u003cdiv id\u003d\"map\" style\u003d\"height: 800px; width: 100%\"\u003e\u003c/div\u003e\n\n\u003cscript type\u003d\"text/javascript\"\u003e\nfunction initMap() {\n    var map \u003d L.map(\u0027map\u0027).setView([30.00, -30.00], 3);\n\n    L.tileLayer(\u0027http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\u0027, {\n        attribution: \u0027Map data \u0026copy; \u003ca href\u003d\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e contributors\u0027,\n        maxZoom: 12,\n        minZoom: 3\n    }).addTo(map);\n\n    var el \u003d angular.element($(\u0027#map\u0027).parent(\u0027.ng-scope\u0027));\n    angular.element(el).ready(function() {\n        window.locationWatcher \u003d el.scope().compiledScope.$watch(\u0027data\u0027, function(newValue, oldValue) {\n            angular.forEach(newValue, function(tweet) {\n                L.marker([tweet.lat, tweet.lon]).bindPopup(\"\u003cb\u003e\" + tweet.user + \"\u003c/b\u003e\u003cbr\u003e\" + tweet.tweet).addTo(map);             \n            });\n        })\n    });\n}\n\nif (window.locationWatcher) { window.locationWatcher(); }\n\nif (window.L) { initMap(); }\nelse {\n    var sc \u003d document.createElement(\u0027script\u0027);\n    sc.type \u003d \u0027text/javascript\u0027;\n    sc.src \u003d \u0027https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js\u0027;\n    sc.onload \u003d initMap;\n    sc.onerror \u003d function(err) { alert(err); }\n    document.getElementsByTagName(\u0027head\u0027)[0].appendChild(sc);\n}\n\u003c/script\u003e"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1505396569055_2009667478",
      "id": "20170914-134249_1248757363",
      "dateCreated": "Sep 14, 2017 1:42:49 PM",
      "dateStarted": "Sep 14, 2017 3:24:25 PM",
      "dateFinished": "Sep 14, 2017 3:24:25 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%spark\nimport org.apache.spark.streaming.twitter._\nval ssc \u003d new StreamingContext(sc, Seconds(10))\n// val tweets \u003d TwitterUtils.createStream(ssc, None, Array(\"#Irma\"))\nval tweets \u003d TwitterUtils.createStream(ssc, None)\n// to debug you turn this on to write out the native output\n// tweets.saveAsObjectFiles(\"/notebook/twitter_\")\n// use this one for inspection\n// tweets.saveAsTextFiles(\"/notebook/twitter_\")\n\nval twt \u003d tweets.window(Seconds(120))\n\ncase class Tweet(user: String, tweet: String, lat: Double, lon: Double)\ntwt.filter(_.getPlace !\u003d null).map(t\u003d\u003e\n  Tweet(t.getUser().getName(), t.getText(), t.getPlace().getBoundingBoxCoordinates().head.head.getLatitude(), t.getPlace().getBoundingBoxCoordinates().head.head.getLongitude())).foreachRDD(rdd\u003d\u003e{\n    var items \u003d rdd.collect()\n    z.angularBind(\"data\", items) \n    rdd.toDF().registerTempTable(\"tweets\")\n}\n)\n\n//twt.print\n\nssc.start()\n\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:24:38 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "editorMode": "ace/mode/text",
        "editorHide": false,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nimport org.apache.spark.streaming.twitter._\n\nssc: org.apache.spark.streaming.StreamingContext \u003d org.apache.spark.streaming.StreamingContext@2eb0b0e4\n\ntweets: org.apache.spark.streaming.dstream.ReceiverInputDStream[twitter4j.Status] \u003d org.apache.spark.streaming.twitter.TwitterInputDStream@6ebb2d30\n\ntwt: org.apache.spark.streaming.dstream.DStream[twitter4j.Status] \u003d org.apache.spark.streaming.dstream.WindowedDStream@8c32331\n\ndefined class Tweet\n\nwarning: there was one deprecation warning; re-run with -deprecation for details\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1505396582764_-658166071",
      "id": "20170914-134302_2079537237",
      "dateCreated": "Sep 14, 2017 1:43:02 PM",
      "dateStarted": "Sep 14, 2017 3:24:38 PM",
      "dateFinished": "Sep 14, 2017 3:24:40 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%sql\n-- checking window contents\n\nselect * from tweets\n\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:25:52 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {
          "0": {
            "graph": {
              "mode": "multiBarChart",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "lineChart": {}
              },
              "commonSetting": {},
              "keys": [],
              "groups": [],
              "values": [
                {
                  "name": "tweet",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ]
            },
            "helium": {}
          }
        },
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "editorMode": "ace/mode/text"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "user\ttweet\tlat\tlon\nleandro üé®\t@mrlulluzin s√≥ a S√¥nia que deve ter um pacto com esse povo kkkkk\t-5.897826\t-35.291178\nLC\tQueria q meu irm√£o trocase de lugar CMG ele trabalhar e eu fica em casa o dia e todo...  Kkk\t-22.777657\t-43.434094\nBaby Z üòç\tAweeeee okay! Bantay ka lang sakin ilang beses mo na ginawa to sakin\t7.130703\t124.157387\nRon Mitchell\t#KeeSept. Healthy pinhook return on Hip 863 from Hunter Valley Farm. Union Rags c. Bought for $75K sold for $475K.\t36.497129\t-89.57151\nsevgi\t@biciyo 2 senedir birini √ßok sevdiƒüim i√ßin √∂ncesi hi√ß ya≈üanmamƒ±≈ü gibi geliyor bana  eski yokmu≈ü hep o varmƒ±≈ü gibi üñ§\t36.939744\t35.235367\nSherüíô\tSerious tho I want Hoseok rainbow gucci sweater\t51.842113\t3.941836\nDoc Washburn\t@AmericanVoterUS @realDonaldTrump @POTUS Or he could just keep his word from last year and send everyone back who is here illegally.\t34.62595\t-92.521595\nCristina\tSometimes I wish I were straight cause the amount of guys that ask for my number is crazy\t29.840708\t-97.993537\nFilizüíõüíô\tY√ºreƒüim aƒüzƒ±ma geldiüôäüò® https://t.co/c8BJD1EAM2\t40.802734\t28.632104\nArat√≥ Gergely\tA Sorosr√≥l sz√≥l√≥ hazugs√°g amerikai szemmel. √ârdemes belen√©zni a kommentekbe is. https://t.co/r1pwSXHfFy\t47.349448\t18.925169\nMax Lerner\t@reporterchris what about Soshnikov?\t44.961937\t-76.353876\nK$NG/SS4ü§¥üèæ\t@Love__Ally Well shidd really tonight üòÇ @ 12am\t29.507337\t-95.505362\nÿßŸÑŸÖ€Å€£€ó€ßŸÑ⁄Ø€Å€£€ó€ß€Å€£€ó€ß€ÅŸá€£\tŸÉŸêŸÄŸä ŸäŸèŸÖÿ±Ÿéÿ∂ #ÿßŸÑ⁄®ŸéŸÑÿ®Ÿí . . #ÿßŸÑŸàÿ¨Ÿá ŸäŸéÿπÿ∑ŸêŸäŸÉŸí #ÿÆÿ®Ÿéÿ¢ÿ¢ÿ±ŸèŸà https://t.co/p0wmJtwM8u\t18.944441\t-8.670788\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1505396625043_-939540111",
      "id": "20170914-134345_1127694139",
      "dateCreated": "Sep 14, 2017 1:43:45 PM",
      "dateStarted": "Sep 14, 2017 3:25:50 PM",
      "dateFinished": "Sep 14, 2017 3:25:50 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%spark\nssc.stop()\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 3:26:02 PM",
      "config": {
        "colWidth": 12.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "editorMode": "ace/mode/text"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "jobName": "paragraph_1505396639847_1843764081",
      "id": "20170914-134359_1211307661",
      "dateCreated": "Sep 14, 2017 1:43:59 PM",
      "dateStarted": "Sep 14, 2017 3:26:02 PM",
      "dateFinished": "Sep 14, 2017 3:26:02 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%spark\n",
      "user": "anonymous",
      "dateUpdated": "Sep 14, 2017 2:24:10 PM",
      "config": {},
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "jobName": "paragraph_1505399050203_1372879568",
      "id": "20170914-142410_2097053109",
      "dateCreated": "Sep 14, 2017 2:24:10 PM",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Bayes Lecture Twitter Map (Part 1.3 Spark Twitter Client Place)",
  "id": "2CUEVG5HN",
  "angularObjects": {
    "2CV12RFZ1:shared_process": [],
    "2CTXX2WRF:shared_process": [],
    "2CSDNZU3C:shared_process": [],
    "2CVPN7EVE:shared_process": [],
    "2CUBUX6MY:shared_process": [],
    "2CSWG2EGM:shared_process": [],
    "2CTNS34A8:shared_process": [],
    "2CU4B4AM4:shared_process": [],
    "2CSBJQYED:shared_process": [],
    "2CS6KN44W:shared_process": [],
    "2CUHKQN66:shared_process": [],
    "2CUMAZ7ZB:shared_process": [],
    "2CSF9MAXX:shared_process": [
      {
        "name": "data",
        "object": [
          {
            "user": "leandro üé®",
            "tweet": "@mrlulluzin s√≥ a S√¥nia que deve ter um pacto com esse povo kkkkk",
            "lat": -5.897826,
            "lon": -35.291178
          },
          {
            "user": "LC",
            "tweet": "Queria q meu irm√£o trocase de lugar CMG ele trabalhar e eu fica em casa o dia e todo...  Kkk",
            "lat": -22.777657,
            "lon": -43.434094
          },
          {
            "user": "Baby Z üòç",
            "tweet": "Aweeeee okay! Bantay ka lang sakin ilang beses mo na ginawa to sakin",
            "lat": 7.130703,
            "lon": 124.157387
          },
          {
            "user": "Ron Mitchell",
            "tweet": "#KeeSept. Healthy pinhook return on Hip 863 from Hunter Valley Farm. Union Rags c. Bought for $75K sold for $475K.",
            "lat": 36.497129,
            "lon": -89.57151
          },
          {
            "user": "sevgi",
            "tweet": "@biciyo 2 senedir birini √ßok sevdiƒüim i√ßin √∂ncesi hi√ß ya≈üanmamƒ±≈ü gibi geliyor bana  eski yokmu≈ü hep o varmƒ±≈ü gibi üñ§",
            "lat": 36.939744,
            "lon": 35.235367
          },
          {
            "user": "Sherüíô",
            "tweet": "Serious tho I want Hoseok rainbow gucci sweater",
            "lat": 51.842113,
            "lon": 3.941836
          },
          {
            "user": "Doc Washburn",
            "tweet": "@AmericanVoterUS @realDonaldTrump @POTUS Or he could just keep his word from last year and send everyone back who is here illegally.",
            "lat": 34.62595,
            "lon": -92.521595
          },
          {
            "user": "Cristina",
            "tweet": "Sometimes I wish I were straight cause the amount of guys that ask for my number is crazy",
            "lat": 29.840708,
            "lon": -97.993537
          },
          {
            "user": "Filizüíõüíô",
            "tweet": "Y√ºreƒüim aƒüzƒ±ma geldiüôäüò® https://t.co/c8BJD1EAM2",
            "lat": 40.802734,
            "lon": 28.632104
          },
          {
            "user": "Arat√≥ Gergely",
            "tweet": "A Sorosr√≥l sz√≥l√≥ hazugs√°g amerikai szemmel. √ârdemes belen√©zni a kommentekbe is. https://t.co/r1pwSXHfFy",
            "lat": 47.349448,
            "lon": 18.925169
          },
          {
            "user": "Max Lerner",
            "tweet": "@reporterchris what about Soshnikov?",
            "lat": 44.961937,
            "lon": -76.353876
          },
          {
            "user": "K$NG/SS4ü§¥üèæ",
            "tweet": "@Love__Ally Well shidd really tonight üòÇ @ 12am",
            "lat": 29.507337,
            "lon": -95.505362
          },
          {
            "user": "ÿßŸÑŸÖ€Å€£€ó€ßŸÑ⁄Ø€Å€£€ó€ß€Å€£€ó€ß€ÅŸá€£",
            "tweet": "ŸÉŸêŸÄŸä ŸäŸèŸÖÿ±Ÿéÿ∂ #ÿßŸÑ⁄®ŸéŸÑÿ®Ÿí . . #ÿßŸÑŸàÿ¨Ÿá ŸäŸéÿπÿ∑ŸêŸäŸÉŸí #ÿÆÿ®Ÿéÿ¢ÿ¢ÿ±ŸèŸà https://t.co/p0wmJtwM8u",
            "lat": 18.944441,
            "lon": -8.670788
          }
        ],
        "noteId": "2CUEVG5HN"
      }
    ],
    "2CTNW73XW:shared_process": [],
    "2CSTEZX6R:shared_process": [],
    "2CUJNHGW7:shared_process": [],
    "2CU5DKK96:shared_process": [],
    "2CTTZV3CP:shared_process": [],
    "2CVBW8WFR:shared_process": []
  },
  "config": {},
  "info": {}
}